{"remainingRequest":"D:\\Desktop\\图书馆系统项目开发\\图书管理系统\\源码\\前端\\book-manage-sys-view\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!D:\\Desktop\\图书馆系统项目开发\\图书管理系统\\源码\\前端\\book-manage-sys-view\\src\\components\\VerticalMenu.vue?vue&type=style&index=0&id=257dd7a5&scoped=true&lang=css&","dependencies":[{"path":"D:\\Desktop\\图书馆系统项目开发\\图书管理系统\\源码\\前端\\book-manage-sys-view\\src\\components\\VerticalMenu.vue","mtime":1734964578960},{"path":"D:\\Desktop\\图书馆系统项目开发\\图书管理系统\\源码\\前端\\book-manage-sys-view\\node_modules\\css-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\Desktop\\图书馆系统项目开发\\图书管理系统\\源码\\前端\\book-manage-sys-view\\node_modules\\vue-loader\\lib\\loaders\\stylePostLoader.js","mtime":499162500000},{"path":"D:\\Desktop\\图书馆系统项目开发\\图书管理系统\\源码\\前端\\book-manage-sys-view\\node_modules\\postcss-loader\\src\\index.js","mtime":499162500000},{"path":"D:\\Desktop\\图书馆系统项目开发\\图书管理系统\\源码\\前端\\book-manage-sys-view\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\Desktop\\图书馆系统项目开发\\图书管理系统\\源码\\前端\\book-manage-sys-view\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:CgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKDQouaXMtYWN0aXZlIHsNCiAgYmFja2dyb3VuZC1jb2xvcjogcmdiKDI0MiwgMjQyLCAyNDIpIWltcG9ydGFudDsNCiAgY29sb3I6ICMxYzFjMWMhaW1wb3J0YW50Ow0KICBmb250LXdlaWdodDogYm9sZDsNCiAgYm9yZGVyLXJhZGl1czogNnB4Ow0KfQ0KDQouZWwtbWVudS1pdGVtLA0KLmVsLXN1Ym1lbnVfX3RpdGxlIHsNCiAgaGVpZ2h0OiA0NXB4IWltcG9ydGFudDsNCiAgbGluZS1oZWlnaHQ6IDQ1cHghaW1wb3J0YW50Ow0KICB1c2VyLXNlbGVjdDogbm9uZTsNCiAgY29sb3I6ICMzMzM7DQp9DQoNCi5lbC1tZW51LWl0ZW06Zm9jdXMsDQouZWwtbWVudS1pdGVtOmhvdmVyIHsNCiAgYm94LXNpemluZzogYm9yZGVyLWJveDsNCiAgYm9yZGVyLXJhZGl1czogNXB4Ow0KICBiYWNrZ3JvdW5kLWNvbG9yOiByZ2IoMjQyLCAyNDIsIDI0MikhaW1wb3J0YW50Ow0KfQ0KDQouZWwtbWVudS1pdGVtIHsNCiAgaGVpZ2h0OiA0NXB4IWltcG9ydGFudDsNCiAgbGluZS1oZWlnaHQ6IDQ1cHghaW1wb3J0YW50Ow0KICBtYXJnaW46IDNweDsNCn0NCg=="},{"version":3,"sources":["VerticalMenu.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAwIA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA","file":"VerticalMenu.vue","sourceRoot":"src/components","sourcesContent":["<template>\r\n  <el-menu :collapse-transition=\"false\" :collapse=\"flag\" style=\"padding: 5px 20px; max-width: 253px;\" :default-active=\"activeIndex\" :background-color=\"bag\" text-color=\"#666\" @select=\"handleSelect\">\r\n    <el-submenu v-for=\"item in routes\" :key=\"item.path\" v-if=\"item.children && item.children.length\" :index=\"item.path\">\r\n      <template slot=\"title\">\r\n        <span style=\"font-size: 14px;\">{{ item.name }}</span>\r\n      </template>\r\n      <el-menu-item v-for=\"(child, childIndex) in item.children\" :key=\"child.path\" :index=\"getCorrectIndex(child)\">\r\n        {{ child.name }}\r\n      </el-menu-item>\r\n    </el-submenu>\r\n    <el-menu-item v-else :key=\"item.path\" :index=\"item.path\">\r\n      <span slot=\"title\" style=\"font-size: 14px;\">{{ item.name }}</span>\r\n    </el-menu-item>\r\n  </el-menu>\r\n</template>\r\n\r\n<script>\r\nexport default {\r\n  name: 'VerticalMenu',\r\n  data() {\r\n    return {\r\n      activeIndex: \"/adminLayout\", // 这里设置一个默认值，你可以根据实际需求调整\r\n      isCollapse: true,\r\n      selectedMenuItem: '',\r\n    };\r\n  },\r\n  props: {\r\n    routes: {\r\n      type: Array,\r\n      required: true\r\n    },\r\n    flag: {\r\n      type: Boolean,\r\n      required: true,\r\n      // 可以给个默认值，若父组件没传则使用默认值，根据实际情况调整是否需要默认值\r\n      default: false\r\n    },\r\n    bag: {\r\n      type: String,\r\n      default: 'rgb(248,248,248)'\r\n    }\r\n  },\r\n  created() {\r\n    // 上次选中路径\r\n    const saveLastPath = sessionStorage.getItem('activeMenuItem');\r\n    if (saveLastPath === null) {\r\n      // 加载首页\r\n      this.handleSelect('/adminLayout');\r\n    } else {\r\n      this.handleSelect(saveLastPath);\r\n    }\r\n  },\r\n  methods: {\r\n    handleSelect(index) {\r\n      // 更新 activeIndex，以便样式等相关逻辑能正确反映当前选中项\r\n      this.activeIndex = index;\r\n      // 发射事件，通知父组件（如果有）当前选中项变化，可用于其他相关逻辑处理\r\n      this.$emit('select', this.activeIndex);\r\n      // 将当前选中的菜单项路径保存到 sessionStorage，方便下次加载时恢复状态\r\n      sessionStorage.setItem('activeMenuItem', this.activeIndex);\r\n\r\n      // 添加路由跳转逻辑，使用 $router.push 进行编程式路由跳转\r\n      // 先判断 index 是否为有效的路由路径，如果是则进行跳转\r\n      if (typeof index ==='string' && index.trim()!== '') {\r\n        this.$router.push({ path: index });\r\n      }\r\n    },\r\n    getCorrectIndex(child) {\r\n      // 根据菜单项的 name 属性来返回正确的 index（路径）值\r\n      if (child.name === '用户管理') {\r\n        return \"/admin/readerManage/userManage\";\r\n      } else if (child.name === '读者建议') {\r\n        return \"/admin/readerManage/readerProposalManage\";\r\n      } else if (child.name === '书籍管理') {\r\n        return \"/admin/bookManage/bookManagePage\";\r\n      } else if (child.name === '书架管理') {\r\n        return \"/admin/bookManage/bookshelfManage\";\r\n      } else if (child.name === '类别管理') {\r\n        return \"/admin/bookManage/categoryManage\";\r\n      } else if (child.name === '借阅记录') {\r\n        return \"/admin/borrowManage/bookOrderHistoryManage\";\r\n      } else if (child.name === '图书预约') {\r\n        return \"/admin/borrowManage/bookRssHistoryManage\";\r\n      } else if (child.name === '订阅通知') {\r\n        return \"/admin/announcement/rssNotificationManage\";\r\n      } else if (child.name === '公告管理') {\r\n        return \"/admin/announcement/noticeManage\";\r\n      } else if (child.name === '行为日志') {\r\n        return \"/admin/announcement/userOperationLogManage\";\r\n      }\r\n      // 如果还有其他菜单项，可以按照类似的逻辑在这里添加更多的判断分支来返回正确路径\r\n      return child.path;\r\n    }\r\n  },\r\n  mounted() {\r\n    const menuItems = this.$el.querySelectorAll('el-menu-item, el-submenu__title');\r\n    menuItems.forEach((item) => {\r\n      // 获取菜单项对应的name属性\r\n      const name = item.querySelector('span').textContent;\r\n      // 根据name获取图标类名\r\n      const iconClass = this.getIconClassByName(name);\r\n      if (iconClass) {\r\n        // 创建<i>元素并设置类名\r\n        const icon = document.createElement('i');\r\n        icon.className = iconClass;\r\n        icon.style.fontSize = '20px';\r\n        // 将<i>元素插入到菜单项中合适的位置\r\n        if (item.classList.contains('el-menu-item')) {\r\n          item.insertBefore(icon, item.firstChild);\r\n        } else if (item.classList.contains('el-submenu__title')) {\r\n          item.insertBefore(icon, item.querySelector('span'));\r\n        }\r\n      }\r\n    });\r\n  },\r\n  // 新增的方法，用于获取图标类名，根据实际菜单项名称返回对应图标类名\r\n  getIconClassByName(name) {\r\n    const iconMap = {\r\n      '图书管理': 'el-icon-book',\r\n      '书籍管理': 'el-icon-tickets',\r\n      '书架管理': 'el-icon-film',\r\n      '类别管理': 'el-icon-share',\r\n      '借阅记录': 'el-icon-view',\r\n      '图书预约': 'el-icon-s-marketing',\r\n      '订阅通知': 'el-icon-message-solid',\r\n      '公告管理': 'el-icon-edit-outline',\r\n      '行为日志': 'el-icon-s-promotion',\r\n      '用户管理': 'el-icon-user-solid',\r\n      '读者建议': 'el-icon-edit-outline'\r\n    };\r\n    return iconMap[name] || '';\r\n  }\r\n};\r\n</script>\r\n\r\n<style scoped>\r\n.is-active {\r\n  background-color: rgb(242, 242, 242)!important;\r\n  color: #1c1c1c!important;\r\n  font-weight: bold;\r\n  border-radius: 6px;\r\n}\r\n\r\n.el-menu-item,\r\n.el-submenu__title {\r\n  height: 45px!important;\r\n  line-height: 45px!important;\r\n  user-select: none;\r\n  color: #333;\r\n}\r\n\r\n.el-menu-item:focus,\r\n.el-menu-item:hover {\r\n  box-sizing: border-box;\r\n  border-radius: 5px;\r\n  background-color: rgb(242, 242, 242)!important;\r\n}\r\n\r\n.el-menu-item {\r\n  height: 45px!important;\r\n  line-height: 45px!important;\r\n  margin: 3px;\r\n}\r\n</style>"]}]}