{"remainingRequest":"D:\\Desktop\\图书馆系统项目开发\\图书管理系统\\源码\\前端\\book-manage-sys-view\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!D:\\Desktop\\图书馆系统项目开发\\图书管理系统\\源码\\前端\\book-manage-sys-view\\src\\components\\VerticalMenu.vue?vue&type=script&lang=js&","dependencies":[{"path":"D:\\Desktop\\图书馆系统项目开发\\图书管理系统\\源码\\前端\\book-manage-sys-view\\src\\components\\VerticalMenu.vue","mtime":1734964578960},{"path":"D:\\Desktop\\图书馆系统项目开发\\图书管理系统\\源码\\前端\\book-manage-sys-view\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\Desktop\\图书馆系统项目开发\\图书管理系统\\源码\\前端\\book-manage-sys-view\\node_modules\\babel-loader\\lib\\index.js","mtime":315532800000},{"path":"D:\\Desktop\\图书馆系统项目开发\\图书管理系统\\源码\\前端\\book-manage-sys-view\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\Desktop\\图书馆系统项目开发\\图书管理系统\\源码\\前端\\book-manage-sys-view\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KDQpleHBvcnQgZGVmYXVsdCB7DQogIG5hbWU6ICdWZXJ0aWNhbE1lbnUnLA0KICBkYXRhKCkgew0KICAgIHJldHVybiB7DQogICAgICBhY3RpdmVJbmRleDogIi9hZG1pbkxheW91dCIsIC8vIOi/memHjOiuvue9ruS4gOS4qum7mOiupOWAvO+8jOS9oOWPr+S7peagueaNruWunumZhemcgOaxguiwg+aVtA0KICAgICAgaXNDb2xsYXBzZTogdHJ1ZSwNCiAgICAgIHNlbGVjdGVkTWVudUl0ZW06ICcnLA0KICAgIH07DQogIH0sDQogIHByb3BzOiB7DQogICAgcm91dGVzOiB7DQogICAgICB0eXBlOiBBcnJheSwNCiAgICAgIHJlcXVpcmVkOiB0cnVlDQogICAgfSwNCiAgICBmbGFnOiB7DQogICAgICB0eXBlOiBCb29sZWFuLA0KICAgICAgcmVxdWlyZWQ6IHRydWUsDQogICAgICAvLyDlj6/ku6Xnu5nkuKrpu5jorqTlgLzvvIzoi6XniLbnu4Tku7bmsqHkvKDliJnkvb/nlKjpu5jorqTlgLzvvIzmoLnmja7lrp7pmYXmg4XlhrXosIPmlbTmmK/lkKbpnIDopoHpu5jorqTlgLwNCiAgICAgIGRlZmF1bHQ6IGZhbHNlDQogICAgfSwNCiAgICBiYWc6IHsNCiAgICAgIHR5cGU6IFN0cmluZywNCiAgICAgIGRlZmF1bHQ6ICdyZ2IoMjQ4LDI0OCwyNDgpJw0KICAgIH0NCiAgfSwNCiAgY3JlYXRlZCgpIHsNCiAgICAvLyDkuIrmrKHpgInkuK3ot6/lvoQNCiAgICBjb25zdCBzYXZlTGFzdFBhdGggPSBzZXNzaW9uU3RvcmFnZS5nZXRJdGVtKCdhY3RpdmVNZW51SXRlbScpOw0KICAgIGlmIChzYXZlTGFzdFBhdGggPT09IG51bGwpIHsNCiAgICAgIC8vIOWKoOi9vemmlumhtQ0KICAgICAgdGhpcy5oYW5kbGVTZWxlY3QoJy9hZG1pbkxheW91dCcpOw0KICAgIH0gZWxzZSB7DQogICAgICB0aGlzLmhhbmRsZVNlbGVjdChzYXZlTGFzdFBhdGgpOw0KICAgIH0NCiAgfSwNCiAgbWV0aG9kczogew0KICAgIGhhbmRsZVNlbGVjdChpbmRleCkgew0KICAgICAgLy8g5pu05pawIGFjdGl2ZUluZGV477yM5Lul5L6/5qC35byP562J55u45YWz6YC76L6R6IO95q2j56Gu5Y+N5pig5b2T5YmN6YCJ5Lit6aG5DQogICAgICB0aGlzLmFjdGl2ZUluZGV4ID0gaW5kZXg7DQogICAgICAvLyDlj5HlsITkuovku7bvvIzpgJrnn6XniLbnu4Tku7bvvIjlpoLmnpzmnInvvInlvZPliY3pgInkuK3pobnlj5jljJbvvIzlj6/nlKjkuo7lhbbku5bnm7jlhbPpgLvovpHlpITnkIYNCiAgICAgIHRoaXMuJGVtaXQoJ3NlbGVjdCcsIHRoaXMuYWN0aXZlSW5kZXgpOw0KICAgICAgLy8g5bCG5b2T5YmN6YCJ5Lit55qE6I+c5Y2V6aG56Lev5b6E5L+d5a2Y5YiwIHNlc3Npb25TdG9yYWdl77yM5pa55L6/5LiL5qyh5Yqg6L295pe25oGi5aSN54q25oCBDQogICAgICBzZXNzaW9uU3RvcmFnZS5zZXRJdGVtKCdhY3RpdmVNZW51SXRlbScsIHRoaXMuYWN0aXZlSW5kZXgpOw0KDQogICAgICAvLyDmt7vliqDot6/nlLHot7PovazpgLvovpHvvIzkvb/nlKggJHJvdXRlci5wdXNoIOi/m+ihjOe8lueoi+W8j+i3r+eUsei3s+i9rA0KICAgICAgLy8g5YWI5Yik5patIGluZGV4IOaYr+WQpuS4uuacieaViOeahOi3r+eUsei3r+W+hO+8jOWmguaenOaYr+WImei/m+ihjOi3s+i9rA0KICAgICAgaWYgKHR5cGVvZiBpbmRleCA9PT0nc3RyaW5nJyAmJiBpbmRleC50cmltKCkhPT0gJycpIHsNCiAgICAgICAgdGhpcy4kcm91dGVyLnB1c2goeyBwYXRoOiBpbmRleCB9KTsNCiAgICAgIH0NCiAgICB9LA0KICAgIGdldENvcnJlY3RJbmRleChjaGlsZCkgew0KICAgICAgLy8g5qC55o2u6I+c5Y2V6aG555qEIG5hbWUg5bGe5oCn5p2l6L+U5Zue5q2j56Gu55qEIGluZGV477yI6Lev5b6E77yJ5YC8DQogICAgICBpZiAoY2hpbGQubmFtZSA9PT0gJ+eUqOaIt+euoeeQhicpIHsNCiAgICAgICAgcmV0dXJuICIvYWRtaW4vcmVhZGVyTWFuYWdlL3VzZXJNYW5hZ2UiOw0KICAgICAgfSBlbHNlIGlmIChjaGlsZC5uYW1lID09PSAn6K+76ICF5bu66K6uJykgew0KICAgICAgICByZXR1cm4gIi9hZG1pbi9yZWFkZXJNYW5hZ2UvcmVhZGVyUHJvcG9zYWxNYW5hZ2UiOw0KICAgICAgfSBlbHNlIGlmIChjaGlsZC5uYW1lID09PSAn5Lmm57GN566h55CGJykgew0KICAgICAgICByZXR1cm4gIi9hZG1pbi9ib29rTWFuYWdlL2Jvb2tNYW5hZ2VQYWdlIjsNCiAgICAgIH0gZWxzZSBpZiAoY2hpbGQubmFtZSA9PT0gJ+S5puaetueuoeeQhicpIHsNCiAgICAgICAgcmV0dXJuICIvYWRtaW4vYm9va01hbmFnZS9ib29rc2hlbGZNYW5hZ2UiOw0KICAgICAgfSBlbHNlIGlmIChjaGlsZC5uYW1lID09PSAn57G75Yir566h55CGJykgew0KICAgICAgICByZXR1cm4gIi9hZG1pbi9ib29rTWFuYWdlL2NhdGVnb3J5TWFuYWdlIjsNCiAgICAgIH0gZWxzZSBpZiAoY2hpbGQubmFtZSA9PT0gJ+WAn+mYheiusOW9lScpIHsNCiAgICAgICAgcmV0dXJuICIvYWRtaW4vYm9ycm93TWFuYWdlL2Jvb2tPcmRlckhpc3RvcnlNYW5hZ2UiOw0KICAgICAgfSBlbHNlIGlmIChjaGlsZC5uYW1lID09PSAn5Zu+5Lmm6aKE57qmJykgew0KICAgICAgICByZXR1cm4gIi9hZG1pbi9ib3Jyb3dNYW5hZ2UvYm9va1Jzc0hpc3RvcnlNYW5hZ2UiOw0KICAgICAgfSBlbHNlIGlmIChjaGlsZC5uYW1lID09PSAn6K6i6ZiF6YCa55+lJykgew0KICAgICAgICByZXR1cm4gIi9hZG1pbi9hbm5vdW5jZW1lbnQvcnNzTm90aWZpY2F0aW9uTWFuYWdlIjsNCiAgICAgIH0gZWxzZSBpZiAoY2hpbGQubmFtZSA9PT0gJ+WFrOWRiueuoeeQhicpIHsNCiAgICAgICAgcmV0dXJuICIvYWRtaW4vYW5ub3VuY2VtZW50L25vdGljZU1hbmFnZSI7DQogICAgICB9IGVsc2UgaWYgKGNoaWxkLm5hbWUgPT09ICfooYzkuLrml6Xlv5cnKSB7DQogICAgICAgIHJldHVybiAiL2FkbWluL2Fubm91bmNlbWVudC91c2VyT3BlcmF0aW9uTG9nTWFuYWdlIjsNCiAgICAgIH0NCiAgICAgIC8vIOWmguaenOi/mOacieWFtuS7luiPnOWNlemhue+8jOWPr+S7peaMieeFp+exu+S8vOeahOmAu+i+keWcqOi/memHjOa3u+WKoOabtOWkmueahOWIpOaWreWIhuaUr+adpei/lOWbnuato+ehrui3r+W+hA0KICAgICAgcmV0dXJuIGNoaWxkLnBhdGg7DQogICAgfQ0KICB9LA0KICBtb3VudGVkKCkgew0KICAgIGNvbnN0IG1lbnVJdGVtcyA9IHRoaXMuJGVsLnF1ZXJ5U2VsZWN0b3JBbGwoJ2VsLW1lbnUtaXRlbSwgZWwtc3VibWVudV9fdGl0bGUnKTsNCiAgICBtZW51SXRlbXMuZm9yRWFjaCgoaXRlbSkgPT4gew0KICAgICAgLy8g6I635Y+W6I+c5Y2V6aG55a+55bqU55qEbmFtZeWxnuaApw0KICAgICAgY29uc3QgbmFtZSA9IGl0ZW0ucXVlcnlTZWxlY3Rvcignc3BhbicpLnRleHRDb250ZW50Ow0KICAgICAgLy8g5qC55o2ubmFtZeiOt+WPluWbvuagh+exu+WQjQ0KICAgICAgY29uc3QgaWNvbkNsYXNzID0gdGhpcy5nZXRJY29uQ2xhc3NCeU5hbWUobmFtZSk7DQogICAgICBpZiAoaWNvbkNsYXNzKSB7DQogICAgICAgIC8vIOWIm+W7ujxpPuWFg+e0oOW5tuiuvue9ruexu+WQjQ0KICAgICAgICBjb25zdCBpY29uID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnaScpOw0KICAgICAgICBpY29uLmNsYXNzTmFtZSA9IGljb25DbGFzczsNCiAgICAgICAgaWNvbi5zdHlsZS5mb250U2l6ZSA9ICcyMHB4JzsNCiAgICAgICAgLy8g5bCGPGk+5YWD57Sg5o+S5YWl5Yiw6I+c5Y2V6aG55Lit5ZCI6YCC55qE5L2N572uDQogICAgICAgIGlmIChpdGVtLmNsYXNzTGlzdC5jb250YWlucygnZWwtbWVudS1pdGVtJykpIHsNCiAgICAgICAgICBpdGVtLmluc2VydEJlZm9yZShpY29uLCBpdGVtLmZpcnN0Q2hpbGQpOw0KICAgICAgICB9IGVsc2UgaWYgKGl0ZW0uY2xhc3NMaXN0LmNvbnRhaW5zKCdlbC1zdWJtZW51X190aXRsZScpKSB7DQogICAgICAgICAgaXRlbS5pbnNlcnRCZWZvcmUoaWNvbiwgaXRlbS5xdWVyeVNlbGVjdG9yKCdzcGFuJykpOw0KICAgICAgICB9DQogICAgICB9DQogICAgfSk7DQogIH0sDQogIC8vIOaWsOWinueahOaWueazle+8jOeUqOS6juiOt+WPluWbvuagh+exu+WQje+8jOagueaNruWunumZheiPnOWNlemhueWQjeensOi/lOWbnuWvueW6lOWbvuagh+exu+WQjQ0KICBnZXRJY29uQ2xhc3NCeU5hbWUobmFtZSkgew0KICAgIGNvbnN0IGljb25NYXAgPSB7DQogICAgICAn5Zu+5Lmm566h55CGJzogJ2VsLWljb24tYm9vaycsDQogICAgICAn5Lmm57GN566h55CGJzogJ2VsLWljb24tdGlja2V0cycsDQogICAgICAn5Lmm5p62566h55CGJzogJ2VsLWljb24tZmlsbScsDQogICAgICAn57G75Yir566h55CGJzogJ2VsLWljb24tc2hhcmUnLA0KICAgICAgJ+WAn+mYheiusOW9lSc6ICdlbC1pY29uLXZpZXcnLA0KICAgICAgJ+WbvuS5pumihOe6pic6ICdlbC1pY29uLXMtbWFya2V0aW5nJywNCiAgICAgICforqLpmIXpgJrnn6UnOiAnZWwtaWNvbi1tZXNzYWdlLXNvbGlkJywNCiAgICAgICflhazlkYrnrqHnkIYnOiAnZWwtaWNvbi1lZGl0LW91dGxpbmUnLA0KICAgICAgJ+ihjOS4uuaXpeW/lyc6ICdlbC1pY29uLXMtcHJvbW90aW9uJywNCiAgICAgICfnlKjmiLfnrqHnkIYnOiAnZWwtaWNvbi11c2VyLXNvbGlkJywNCiAgICAgICfor7vogIXlu7rorq4nOiAnZWwtaWNvbi1lZGl0LW91dGxpbmUnDQogICAgfTsNCiAgICByZXR1cm4gaWNvbk1hcFtuYW1lXSB8fCAnJzsNCiAgfQ0KfTsNCg=="},{"version":3,"sources":["VerticalMenu.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;AAiBA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"VerticalMenu.vue","sourceRoot":"src/components","sourcesContent":["<template>\r\n  <el-menu :collapse-transition=\"false\" :collapse=\"flag\" style=\"padding: 5px 20px; max-width: 253px;\" :default-active=\"activeIndex\" :background-color=\"bag\" text-color=\"#666\" @select=\"handleSelect\">\r\n    <el-submenu v-for=\"item in routes\" :key=\"item.path\" v-if=\"item.children && item.children.length\" :index=\"item.path\">\r\n      <template slot=\"title\">\r\n        <span style=\"font-size: 14px;\">{{ item.name }}</span>\r\n      </template>\r\n      <el-menu-item v-for=\"(child, childIndex) in item.children\" :key=\"child.path\" :index=\"getCorrectIndex(child)\">\r\n        {{ child.name }}\r\n      </el-menu-item>\r\n    </el-submenu>\r\n    <el-menu-item v-else :key=\"item.path\" :index=\"item.path\">\r\n      <span slot=\"title\" style=\"font-size: 14px;\">{{ item.name }}</span>\r\n    </el-menu-item>\r\n  </el-menu>\r\n</template>\r\n\r\n<script>\r\nexport default {\r\n  name: 'VerticalMenu',\r\n  data() {\r\n    return {\r\n      activeIndex: \"/adminLayout\", // 这里设置一个默认值，你可以根据实际需求调整\r\n      isCollapse: true,\r\n      selectedMenuItem: '',\r\n    };\r\n  },\r\n  props: {\r\n    routes: {\r\n      type: Array,\r\n      required: true\r\n    },\r\n    flag: {\r\n      type: Boolean,\r\n      required: true,\r\n      // 可以给个默认值，若父组件没传则使用默认值，根据实际情况调整是否需要默认值\r\n      default: false\r\n    },\r\n    bag: {\r\n      type: String,\r\n      default: 'rgb(248,248,248)'\r\n    }\r\n  },\r\n  created() {\r\n    // 上次选中路径\r\n    const saveLastPath = sessionStorage.getItem('activeMenuItem');\r\n    if (saveLastPath === null) {\r\n      // 加载首页\r\n      this.handleSelect('/adminLayout');\r\n    } else {\r\n      this.handleSelect(saveLastPath);\r\n    }\r\n  },\r\n  methods: {\r\n    handleSelect(index) {\r\n      // 更新 activeIndex，以便样式等相关逻辑能正确反映当前选中项\r\n      this.activeIndex = index;\r\n      // 发射事件，通知父组件（如果有）当前选中项变化，可用于其他相关逻辑处理\r\n      this.$emit('select', this.activeIndex);\r\n      // 将当前选中的菜单项路径保存到 sessionStorage，方便下次加载时恢复状态\r\n      sessionStorage.setItem('activeMenuItem', this.activeIndex);\r\n\r\n      // 添加路由跳转逻辑，使用 $router.push 进行编程式路由跳转\r\n      // 先判断 index 是否为有效的路由路径，如果是则进行跳转\r\n      if (typeof index ==='string' && index.trim()!== '') {\r\n        this.$router.push({ path: index });\r\n      }\r\n    },\r\n    getCorrectIndex(child) {\r\n      // 根据菜单项的 name 属性来返回正确的 index（路径）值\r\n      if (child.name === '用户管理') {\r\n        return \"/admin/readerManage/userManage\";\r\n      } else if (child.name === '读者建议') {\r\n        return \"/admin/readerManage/readerProposalManage\";\r\n      } else if (child.name === '书籍管理') {\r\n        return \"/admin/bookManage/bookManagePage\";\r\n      } else if (child.name === '书架管理') {\r\n        return \"/admin/bookManage/bookshelfManage\";\r\n      } else if (child.name === '类别管理') {\r\n        return \"/admin/bookManage/categoryManage\";\r\n      } else if (child.name === '借阅记录') {\r\n        return \"/admin/borrowManage/bookOrderHistoryManage\";\r\n      } else if (child.name === '图书预约') {\r\n        return \"/admin/borrowManage/bookRssHistoryManage\";\r\n      } else if (child.name === '订阅通知') {\r\n        return \"/admin/announcement/rssNotificationManage\";\r\n      } else if (child.name === '公告管理') {\r\n        return \"/admin/announcement/noticeManage\";\r\n      } else if (child.name === '行为日志') {\r\n        return \"/admin/announcement/userOperationLogManage\";\r\n      }\r\n      // 如果还有其他菜单项，可以按照类似的逻辑在这里添加更多的判断分支来返回正确路径\r\n      return child.path;\r\n    }\r\n  },\r\n  mounted() {\r\n    const menuItems = this.$el.querySelectorAll('el-menu-item, el-submenu__title');\r\n    menuItems.forEach((item) => {\r\n      // 获取菜单项对应的name属性\r\n      const name = item.querySelector('span').textContent;\r\n      // 根据name获取图标类名\r\n      const iconClass = this.getIconClassByName(name);\r\n      if (iconClass) {\r\n        // 创建<i>元素并设置类名\r\n        const icon = document.createElement('i');\r\n        icon.className = iconClass;\r\n        icon.style.fontSize = '20px';\r\n        // 将<i>元素插入到菜单项中合适的位置\r\n        if (item.classList.contains('el-menu-item')) {\r\n          item.insertBefore(icon, item.firstChild);\r\n        } else if (item.classList.contains('el-submenu__title')) {\r\n          item.insertBefore(icon, item.querySelector('span'));\r\n        }\r\n      }\r\n    });\r\n  },\r\n  // 新增的方法，用于获取图标类名，根据实际菜单项名称返回对应图标类名\r\n  getIconClassByName(name) {\r\n    const iconMap = {\r\n      '图书管理': 'el-icon-book',\r\n      '书籍管理': 'el-icon-tickets',\r\n      '书架管理': 'el-icon-film',\r\n      '类别管理': 'el-icon-share',\r\n      '借阅记录': 'el-icon-view',\r\n      '图书预约': 'el-icon-s-marketing',\r\n      '订阅通知': 'el-icon-message-solid',\r\n      '公告管理': 'el-icon-edit-outline',\r\n      '行为日志': 'el-icon-s-promotion',\r\n      '用户管理': 'el-icon-user-solid',\r\n      '读者建议': 'el-icon-edit-outline'\r\n    };\r\n    return iconMap[name] || '';\r\n  }\r\n};\r\n</script>\r\n\r\n<style scoped>\r\n.is-active {\r\n  background-color: rgb(242, 242, 242)!important;\r\n  color: #1c1c1c!important;\r\n  font-weight: bold;\r\n  border-radius: 6px;\r\n}\r\n\r\n.el-menu-item,\r\n.el-submenu__title {\r\n  height: 45px!important;\r\n  line-height: 45px!important;\r\n  user-select: none;\r\n  color: #333;\r\n}\r\n\r\n.el-menu-item:focus,\r\n.el-menu-item:hover {\r\n  box-sizing: border-box;\r\n  border-radius: 5px;\r\n  background-color: rgb(242, 242, 242)!important;\r\n}\r\n\r\n.el-menu-item {\r\n  height: 45px!important;\r\n  line-height: 45px!important;\r\n  margin: 3px;\r\n}\r\n</style>"]}]}