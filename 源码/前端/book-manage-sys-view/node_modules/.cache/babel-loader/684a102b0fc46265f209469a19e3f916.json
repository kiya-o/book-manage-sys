{"remainingRequest":"D:\\Desktop\\图书馆系统项目开发\\图书管理系统\\源码\\前端\\book-manage-sys-view\\node_modules\\babel-loader\\lib\\index.js!D:\\Desktop\\图书馆系统项目开发\\图书管理系统\\源码\\前端\\book-manage-sys-view\\node_modules\\cache-loader\\dist\\cjs.js??ref--0-0!D:\\Desktop\\图书馆系统项目开发\\图书管理系统\\源码\\前端\\book-manage-sys-view\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!D:\\Desktop\\图书馆系统项目开发\\图书管理系统\\源码\\前端\\book-manage-sys-view\\src\\views\\login\\Login.vue?vue&type=script&lang=js&","dependencies":[{"path":"D:\\Desktop\\图书馆系统项目开发\\图书管理系统\\源码\\前端\\book-manage-sys-view\\src\\views\\login\\Login.vue","mtime":1734963689012},{"path":"D:\\Desktop\\图书馆系统项目开发\\图书管理系统\\源码\\前端\\book-manage-sys-view\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\Desktop\\图书馆系统项目开发\\图书管理系统\\源码\\前端\\book-manage-sys-view\\node_modules\\babel-loader\\lib\\index.js","mtime":315532800000},{"path":"D:\\Desktop\\图书馆系统项目开发\\图书管理系统\\源码\\前端\\book-manage-sys-view\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\Desktop\\图书馆系统项目开发\\图书管理系统\\源码\\前端\\book-manage-sys-view\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KaW1wb3J0IFZ1ZSBmcm9tICd2dWUnOwpjb25zdCBERUxBWV9USU1FID0gMTMwMDsKaW1wb3J0IHJlcXVlc3QgZnJvbSAiQC91dGlscy9yZXF1ZXN0LmpzIjsKaW1wb3J0IHsgc2V0VG9rZW4gfSBmcm9tICJAL3V0aWxzL3N0b3JhZ2UuanMiOwppbXBvcnQgbWQ1IGZyb20gJ2pzLW1kNSc7CmltcG9ydCBMb2dvIGZyb20gJ0AvY29tcG9uZW50cy9Mb2dvLnZ1ZSc7CmV4cG9ydCBkZWZhdWx0IHsKICBuYW1lOiAiTG9naW4iLAogIGNvbXBvbmVudHM6IHsKICAgIExvZ28KICB9LAoKICBkYXRhKCkgewogICAgcmV0dXJuIHsKICAgICAgYWN0OiAnJywKICAgICAgcHdkOiAnJywKICAgICAgY29sb3JMb2dvOiAncmdiKDgyLCA4MSwgODEpJwogICAgfTsKICB9LAoKICBtZXRob2RzOiB7CiAgICB0b0RvUmVnaXN0ZXIoKSB7CiAgICAgIHRoaXMuJHJvdXRlci5wdXNoKCcvcmVnaXN0ZXInKTsKICAgIH0sCgogICAgYXN5bmMgbG9naW4oKSB7CiAgICAgIGlmICghdGhpcy5hY3QgfHwgIXRoaXMucHdkKSB7CiAgICAgICAgVnVlLnByb3RvdHlwZS4kc3dhbC5maXJlKHsKICAgICAgICAgIHRpdGxlOiAn5aGr5YaZ5qCh6aqMJywKICAgICAgICAgIHRleHQ6ICfotKblj7fmiJblr4bnoIHkuI3og73kuLrnqbonLAogICAgICAgICAgaWNvbjogJ2Vycm9yJywKICAgICAgICAgIHNob3dDb25maXJtQnV0dG9uOiBmYWxzZSwKICAgICAgICAgIHRpbWVyOiBERUxBWV9USU1FCiAgICAgICAgfSk7CiAgICAgICAgcmV0dXJuOwogICAgICB9CgogICAgICBjb25zdCBoYXNoZWRQd2QgPSBtZDUobWQ1KHRoaXMucHdkKSk7CiAgICAgIGNvbnN0IHBhcmFtRFRPID0gewogICAgICAgIHVzZXJBY2NvdW50OiB0aGlzLmFjdCwKICAgICAgICB1c2VyUHdkOiBoYXNoZWRQd2QKICAgICAgfTsKCiAgICAgIHRyeSB7CiAgICAgICAgY29uc3QgewogICAgICAgICAgZGF0YQogICAgICAgIH0gPSBhd2FpdCByZXF1ZXN0LnBvc3QoYHVzZXIvbG9naW5gLCBwYXJhbURUTyk7CgogICAgICAgIGlmIChkYXRhLmNvZGUgIT09IDIwMCkgewogICAgICAgICAgVnVlLnByb3RvdHlwZS4kc3dhbC5maXJlKHsKICAgICAgICAgICAgdGl0bGU6ICfnmbvlvZXlpLHotKUnLAogICAgICAgICAgICB0ZXh0OiBkYXRhLm1zZywKICAgICAgICAgICAgaWNvbjogJ2Vycm9yJywKICAgICAgICAgICAgc2hvd0NvbmZpcm1CdXR0b246IGZhbHNlLAogICAgICAgICAgICB0aW1lcjogREVMQVlfVElNRQogICAgICAgICAgfSk7CiAgICAgICAgICByZXR1cm47CiAgICAgICAgfQoKICAgICAgICBzZXRUb2tlbihkYXRhLmRhdGEudG9rZW4pOwogICAgICAgIHNldFRpbWVvdXQoKCkgPT4gewogICAgICAgICAgY29uc3QgewogICAgICAgICAgICByb2xlCiAgICAgICAgICB9ID0gZGF0YS5kYXRhOwogICAgICAgICAgdGhpcy5uYXZpZ2F0ZVRvUm9sZShyb2xlKTsKICAgICAgICB9LCBERUxBWV9USU1FKTsKICAgICAgfSBjYXRjaCAoZXJyb3IpIHsKICAgICAgICBjb25zb2xlLmVycm9yKCfnmbvlvZXor7fmsYLplJnor686JywgZXJyb3IpOwogICAgICAgIFZ1ZS5wcm90b3R5cGUuJG1lc3NhZ2UuZXJyb3IoJ+eZu+W9leivt+axguWHuumUme+8jOivt+mHjeivle+8gScpOwogICAgICB9CiAgICB9LAoKICAgIG5hdmlnYXRlVG9Sb2xlKHJvbGUpIHsKICAgICAgc3dpdGNoIChyb2xlKSB7CiAgICAgICAgY2FzZSAxOgogICAgICAgICAgdGhpcy4kcm91dGVyLnB1c2goJy9hZG1pbicpOwogICAgICAgICAgYnJlYWs7CgogICAgICAgIGNhc2UgMjoKICAgICAgICAgIHRoaXMuJHJvdXRlci5wdXNoKCcvdXNlcicpOwogICAgICAgICAgYnJlYWs7CgogICAgICAgIGRlZmF1bHQ6CiAgICAgICAgICBjb25zb2xlLndhcm4oJ+acquefpeeahOinkuiJsuexu+WeizonLCByb2xlKTsKICAgICAgICAgIGJyZWFrOwogICAgICB9CiAgICB9CgogIH0KfTs="},{"version":3,"sources":["Login.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;AA6BA,OAAA,GAAA,MAAA,KAAA;AACA,MAAA,UAAA,GAAA,IAAA;AACA,OAAA,OAAA,MAAA,oBAAA;AACA,SAAA,QAAA,QAAA,oBAAA;AACA,OAAA,GAAA,MAAA,QAAA;AACA,OAAA,IAAA,MAAA,uBAAA;AACA,eAAA;AACA,EAAA,IAAA,EAAA,OADA;AAEA,EAAA,UAAA,EAAA;AAAA,IAAA;AAAA,GAFA;;AAGA,EAAA,IAAA,GAAA;AACA,WAAA;AACA,MAAA,GAAA,EAAA,EADA;AAEA,MAAA,GAAA,EAAA,EAFA;AAGA,MAAA,SAAA,EAAA;AAHA,KAAA;AAKA,GATA;;AAUA,EAAA,OAAA,EAAA;AACA,IAAA,YAAA,GAAA;AACA,WAAA,OAAA,CAAA,IAAA,CAAA,WAAA;AACA,KAHA;;AAIA,UAAA,KAAA,GAAA;AACA,UAAA,CAAA,KAAA,GAAA,IAAA,CAAA,KAAA,GAAA,EAAA;AACA,QAAA,GAAA,CAAA,SAAA,CAAA,KAAA,CAAA,IAAA,CAAA;AACA,UAAA,KAAA,EAAA,MADA;AAEA,UAAA,IAAA,EAAA,WAFA;AAGA,UAAA,IAAA,EAAA,OAHA;AAIA,UAAA,iBAAA,EAAA,KAJA;AAKA,UAAA,KAAA,EAAA;AALA,SAAA;AAOA;AACA;;AACA,YAAA,SAAA,GAAA,GAAA,CAAA,GAAA,CAAA,KAAA,GAAA,CAAA,CAAA;AACA,YAAA,QAAA,GAAA;AAAA,QAAA,WAAA,EAAA,KAAA,GAAA;AAAA,QAAA,OAAA,EAAA;AAAA,OAAA;;AACA,UAAA;AACA,cAAA;AAAA,UAAA;AAAA,YAAA,MAAA,OAAA,CAAA,IAAA,CAAA,YAAA,EAAA,QAAA,CAAA;;AACA,YAAA,IAAA,CAAA,IAAA,KAAA,GAAA,EAAA;AACA,UAAA,GAAA,CAAA,SAAA,CAAA,KAAA,CAAA,IAAA,CAAA;AACA,YAAA,KAAA,EAAA,MADA;AAEA,YAAA,IAAA,EAAA,IAAA,CAAA,GAFA;AAGA,YAAA,IAAA,EAAA,OAHA;AAIA,YAAA,iBAAA,EAAA,KAJA;AAKA,YAAA,KAAA,EAAA;AALA,WAAA;AAOA;AACA;;AACA,QAAA,QAAA,CAAA,IAAA,CAAA,IAAA,CAAA,KAAA,CAAA;AACA,QAAA,UAAA,CAAA,MAAA;AACA,gBAAA;AAAA,YAAA;AAAA,cAAA,IAAA,CAAA,IAAA;AACA,eAAA,cAAA,CAAA,IAAA;AACA,SAHA,EAGA,UAHA,CAAA;AAIA,OAjBA,CAiBA,OAAA,KAAA,EAAA;AACA,QAAA,OAAA,CAAA,KAAA,CAAA,SAAA,EAAA,KAAA;AACA,QAAA,GAAA,CAAA,SAAA,CAAA,QAAA,CAAA,KAAA,CAAA,aAAA;AACA;AACA,KAtCA;;AAuCA,IAAA,cAAA,CAAA,IAAA,EAAA;AACA,cAAA,IAAA;AACA,aAAA,CAAA;AACA,eAAA,OAAA,CAAA,IAAA,CAAA,QAAA;AACA;;AACA,aAAA,CAAA;AACA,eAAA,OAAA,CAAA,IAAA,CAAA,OAAA;AACA;;AACA;AACA,UAAA,OAAA,CAAA,IAAA,CAAA,UAAA,EAAA,IAAA;AACA;AATA;AAWA;;AAnDA;AAVA,CAAA","sourcesContent":["<template>\r\n    <div class=\"login-container\">\r\n        <div style=\"display: flex;justify-content: left;margin: 20px 0;\">\r\n        </div>\r\n        <div class=\"login-panel\">\r\n            <div style=\"width: 250px;padding: 10px;display: flex;justify-content: center;align-items: center;\">\r\n            </div>\r\n            <div class=\"right-login\">\r\n                <div>\r\n                    <h2>登录账户</h2>\r\n                </div>\r\n                <div class=\"text\">\r\n                    <input v-model=\"act\" class=\"act\" placeholder=\"请输入账号\" />\r\n                </div>\r\n                <div class=\"text\">\r\n                    <input v-model=\"pwd\" class=\"pwd\" type=\"password\" placeholder=\"请输入密码\" />\r\n                </div>\r\n                <div>\r\n                    <span class=\"login-btn\" @click=\"login\">立即登录</span>\r\n                </div>\r\n                <div class=\"tip\">\r\n                    <p>没有账号？<span class=\"no-act\" @click=\"toDoRegister\">点此注册</span></p>\r\n                </div>\r\n            </div>\r\n        </div>\r\n    </div>\r\n</template>\r\n\r\n<script>\r\nimport Vue from 'vue'\r\nconst DELAY_TIME = 1300;\r\nimport request from \"@/utils/request.js\";\r\nimport { setToken } from \"@/utils/storage.js\";\r\nimport md5 from 'js-md5';\r\nimport Logo from '@/components/Logo.vue';\r\nexport default {\r\n    name: \"Login\",\r\n    components: { Logo },\r\n    data() {\r\n        return {\r\n            act: '',\r\n            pwd: '',\r\n            colorLogo: 'rgb(82, 81, 81)',\r\n        }\r\n    },\r\n    methods: {\r\n        toDoRegister() {\r\n            this.$router.push('/register');\r\n        },\r\n        async login() {\r\n            if (!this.act || !this.pwd) {\r\n                Vue.prototype.$swal.fire({\r\n                    title: '填写校验',\r\n                    text: '账号或密码不能为空',\r\n                    icon: 'error',\r\n                    showConfirmButton: false,\r\n                    timer: DELAY_TIME,\r\n                });\r\n                return;\r\n            }\r\n            const hashedPwd = md5(md5(this.pwd));\r\n            const paramDTO = { userAccount: this.act, userPwd: hashedPwd };\r\n            try {\r\n                const { data } = await request.post(`user/login`, paramDTO);\r\n                if (data.code !== 200) {\r\n                    Vue.prototype.$swal.fire({\r\n                        title: '登录失败',\r\n                        text: data.msg,\r\n                        icon: 'error',\r\n                        showConfirmButton: false,\r\n                        timer: DELAY_TIME,\r\n                    });\r\n                    return;\r\n                }\r\n                setToken(data.data.token);\r\n                setTimeout(() => {\r\n                    const { role } = data.data;\r\n                    this.navigateToRole(role);\r\n                }, DELAY_TIME);\r\n            } catch (error) {\r\n                console.error('登录请求错误:', error);\r\n                Vue.prototype.$message.error('登录请求出错，请重试！');\r\n            }\r\n        },\r\n        navigateToRole(role) {\r\n            switch (role) {\r\n                case 1:\r\n                    this.$router.push('/admin');\r\n                    break;\r\n                case 2:\r\n                    this.$router.push('/user');\r\n                    break;\r\n                default:\r\n                    console.warn('未知的角色类型:', role);\r\n                    break;\r\n            }\r\n        },\r\n    }\r\n};\r\n</script>\r\n\r\n<style lang=\"scss\" scoped>\r\n* {\r\n    user-select: none;\r\n}\r\n\r\n.login-container {\r\n    width: 100%;\r\n    min-height: 100vh;\r\n    background-image: url('/bg.jpg'); // 使用背景图片，根据实际项目中图片存放路径调整此处\r\n    background-size: cover;\r\n    background-position: right;\r\n    background-repeat: no-repeat;\r\n    display: flex;\r\n    justify-content: center;\r\n    align-items: center;\r\n    flex-direction: column;\r\n}\r\n\r\n.login-panel {\r\n    position: fixed; /* 或者 relative, fixed, sticky 等 */\r\n    top: 50px; /* 根据需要调整 */\r\n    right: 50px;\r\n    padding: 15px;\r\n    justify-content: space-between;\r\n    height: auto;\r\n    border-radius: 5px;\r\n    background: linear-gradient(to right, rgb(255, 255, 255), rgba(165, 174, 171, 0.8));\r\n    margin-right: 45px; // 确保.login-panel位于背景的右侧\r\n}\r\n\r\n.right-login {\r\n    width: 250px;\r\n    background-color: white;\r\n    padding: 30px;\r\n    border-radius: 5px;\r\n}\r\n\r\n.logo {\r\n    margin: 10px 0 30px 0;\r\n}\r\n\r\n.act,\r\n.pwd {\r\n    margin: 8px 0;\r\n    height: 63px;\r\n    line-height: 63px;\r\n    width: 100%;\r\n    font-size: 20px;\r\n    font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;\r\n    font-weight: 800;\r\n    padding: 0 8px;\r\n    background-color: rgba(47, 195, 145, 0.15);\r\n    box-sizing: border-box;\r\n    border: 2px solid rgba(47, 195, 145, 0.3);\r\n    border-radius: 6px;\r\n    padding: 0 15px;\r\n    margin-top: 13px;\r\n}\r\n\r\n.act:focus,\r\n.pwd:focus {\r\n    outline: none;\r\n    transition: 1.2s;\r\n    background-color: rgba(47, 195, 145, 0.25);\r\n}\r\n\r\n.login-btn:hover {\r\n    background-color: rgba(47, 195, 145, 0.8);\r\n}\r\n\r\n.login-btn {\r\n    display: inline-block;\r\n    text-align: center;\r\n    border-radius: 3px;\r\n    margin-top: 20px;\r\n    height: 43px;\r\n    line-height: 43px;\r\n    width: 100%;\r\n    background-color: rgb(47, 195, 145);\r\n    font-size: 14px!important;\r\n    border: none;\r\n    color: white;\r\n    padding: 0!important;\r\n    cursor: pointer;\r\n    user-select: none;\r\n}\r\n\r\n.tip {\r\n    margin: 20px 0;\r\n\r\n    p {\r\n        padding: 3px 0;\r\n        margin: 0;\r\n        font-size: 14px;\r\n        color: rgb(100, 120, 100);\r\n        i {\r\n            margin-right: 3px;\r\n        }\r\n\r\n        span {\r\n            color: rgb(60, 80, 60);\r\n            border-radius: 2px;\r\n            margin: 0 6px;\r\n        }\r\n\r\n        .no-act:hover {\r\n            color: rgba(47, 195, 145, 0.8);\r\n            cursor: pointer;\r\n        }\r\n    }\r\n}\r\n</style>"],"sourceRoot":"src/views/login"}]}