{"remainingRequest":"D:\\Desktop\\图书馆系统项目开发\\图书管理系统\\源码\\前端\\book-manage-sys-view\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!D:\\Desktop\\图书馆系统项目开发\\图书管理系统\\源码\\前端\\book-manage-sys-view\\src\\views\\login\\Login.vue?vue&type=script&lang=js&","dependencies":[{"path":"D:\\Desktop\\图书馆系统项目开发\\图书管理系统\\源码\\前端\\book-manage-sys-view\\src\\views\\login\\Login.vue","mtime":1734963689012},{"path":"D:\\Desktop\\图书馆系统项目开发\\图书管理系统\\源码\\前端\\book-manage-sys-view\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\Desktop\\图书馆系统项目开发\\图书管理系统\\源码\\前端\\book-manage-sys-view\\node_modules\\babel-loader\\lib\\index.js","mtime":315532800000},{"path":"D:\\Desktop\\图书馆系统项目开发\\图书管理系统\\源码\\前端\\book-manage-sys-view\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\Desktop\\图书馆系统项目开发\\图书管理系统\\源码\\前端\\book-manage-sys-view\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KDQppbXBvcnQgVnVlIGZyb20gJ3Z1ZScNCmNvbnN0IERFTEFZX1RJTUUgPSAxMzAwOw0KaW1wb3J0IHJlcXVlc3QgZnJvbSAiQC91dGlscy9yZXF1ZXN0LmpzIjsNCmltcG9ydCB7IHNldFRva2VuIH0gZnJvbSAiQC91dGlscy9zdG9yYWdlLmpzIjsNCmltcG9ydCBtZDUgZnJvbSAnanMtbWQ1JzsNCmltcG9ydCBMb2dvIGZyb20gJ0AvY29tcG9uZW50cy9Mb2dvLnZ1ZSc7DQpleHBvcnQgZGVmYXVsdCB7DQogICAgbmFtZTogIkxvZ2luIiwNCiAgICBjb21wb25lbnRzOiB7IExvZ28gfSwNCiAgICBkYXRhKCkgew0KICAgICAgICByZXR1cm4gew0KICAgICAgICAgICAgYWN0OiAnJywNCiAgICAgICAgICAgIHB3ZDogJycsDQogICAgICAgICAgICBjb2xvckxvZ286ICdyZ2IoODIsIDgxLCA4MSknLA0KICAgICAgICB9DQogICAgfSwNCiAgICBtZXRob2RzOiB7DQogICAgICAgIHRvRG9SZWdpc3RlcigpIHsNCiAgICAgICAgICAgIHRoaXMuJHJvdXRlci5wdXNoKCcvcmVnaXN0ZXInKTsNCiAgICAgICAgfSwNCiAgICAgICAgYXN5bmMgbG9naW4oKSB7DQogICAgICAgICAgICBpZiAoIXRoaXMuYWN0IHx8ICF0aGlzLnB3ZCkgew0KICAgICAgICAgICAgICAgIFZ1ZS5wcm90b3R5cGUuJHN3YWwuZmlyZSh7DQogICAgICAgICAgICAgICAgICAgIHRpdGxlOiAn5aGr5YaZ5qCh6aqMJywNCiAgICAgICAgICAgICAgICAgICAgdGV4dDogJ+i0puWPt+aIluWvhueggeS4jeiDveS4uuepuicsDQogICAgICAgICAgICAgICAgICAgIGljb246ICdlcnJvcicsDQogICAgICAgICAgICAgICAgICAgIHNob3dDb25maXJtQnV0dG9uOiBmYWxzZSwNCiAgICAgICAgICAgICAgICAgICAgdGltZXI6IERFTEFZX1RJTUUsDQogICAgICAgICAgICAgICAgfSk7DQogICAgICAgICAgICAgICAgcmV0dXJuOw0KICAgICAgICAgICAgfQ0KICAgICAgICAgICAgY29uc3QgaGFzaGVkUHdkID0gbWQ1KG1kNSh0aGlzLnB3ZCkpOw0KICAgICAgICAgICAgY29uc3QgcGFyYW1EVE8gPSB7IHVzZXJBY2NvdW50OiB0aGlzLmFjdCwgdXNlclB3ZDogaGFzaGVkUHdkIH07DQogICAgICAgICAgICB0cnkgew0KICAgICAgICAgICAgICAgIGNvbnN0IHsgZGF0YSB9ID0gYXdhaXQgcmVxdWVzdC5wb3N0KGB1c2VyL2xvZ2luYCwgcGFyYW1EVE8pOw0KICAgICAgICAgICAgICAgIGlmIChkYXRhLmNvZGUgIT09IDIwMCkgew0KICAgICAgICAgICAgICAgICAgICBWdWUucHJvdG90eXBlLiRzd2FsLmZpcmUoew0KICAgICAgICAgICAgICAgICAgICAgICAgdGl0bGU6ICfnmbvlvZXlpLHotKUnLA0KICAgICAgICAgICAgICAgICAgICAgICAgdGV4dDogZGF0YS5tc2csDQogICAgICAgICAgICAgICAgICAgICAgICBpY29uOiAnZXJyb3InLA0KICAgICAgICAgICAgICAgICAgICAgICAgc2hvd0NvbmZpcm1CdXR0b246IGZhbHNlLA0KICAgICAgICAgICAgICAgICAgICAgICAgdGltZXI6IERFTEFZX1RJTUUsDQogICAgICAgICAgICAgICAgICAgIH0pOw0KICAgICAgICAgICAgICAgICAgICByZXR1cm47DQogICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgIHNldFRva2VuKGRhdGEuZGF0YS50b2tlbik7DQogICAgICAgICAgICAgICAgc2V0VGltZW91dCgoKSA9PiB7DQogICAgICAgICAgICAgICAgICAgIGNvbnN0IHsgcm9sZSB9ID0gZGF0YS5kYXRhOw0KICAgICAgICAgICAgICAgICAgICB0aGlzLm5hdmlnYXRlVG9Sb2xlKHJvbGUpOw0KICAgICAgICAgICAgICAgIH0sIERFTEFZX1RJTUUpOw0KICAgICAgICAgICAgfSBjYXRjaCAoZXJyb3IpIHsNCiAgICAgICAgICAgICAgICBjb25zb2xlLmVycm9yKCfnmbvlvZXor7fmsYLplJnor686JywgZXJyb3IpOw0KICAgICAgICAgICAgICAgIFZ1ZS5wcm90b3R5cGUuJG1lc3NhZ2UuZXJyb3IoJ+eZu+W9leivt+axguWHuumUme+8jOivt+mHjeivle+8gScpOw0KICAgICAgICAgICAgfQ0KICAgICAgICB9LA0KICAgICAgICBuYXZpZ2F0ZVRvUm9sZShyb2xlKSB7DQogICAgICAgICAgICBzd2l0Y2ggKHJvbGUpIHsNCiAgICAgICAgICAgICAgICBjYXNlIDE6DQogICAgICAgICAgICAgICAgICAgIHRoaXMuJHJvdXRlci5wdXNoKCcvYWRtaW4nKTsNCiAgICAgICAgICAgICAgICAgICAgYnJlYWs7DQogICAgICAgICAgICAgICAgY2FzZSAyOg0KICAgICAgICAgICAgICAgICAgICB0aGlzLiRyb3V0ZXIucHVzaCgnL3VzZXInKTsNCiAgICAgICAgICAgICAgICAgICAgYnJlYWs7DQogICAgICAgICAgICAgICAgZGVmYXVsdDoNCiAgICAgICAgICAgICAgICAgICAgY29uc29sZS53YXJuKCfmnKrnn6XnmoTop5LoibLnsbvlnos6Jywgcm9sZSk7DQogICAgICAgICAgICAgICAgICAgIGJyZWFrOw0KICAgICAgICAgICAgfQ0KICAgICAgICB9LA0KICAgIH0NCn07DQo="},{"version":3,"sources":["Login.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA6BA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"Login.vue","sourceRoot":"src/views/login","sourcesContent":["<template>\r\n    <div class=\"login-container\">\r\n        <div style=\"display: flex;justify-content: left;margin: 20px 0;\">\r\n        </div>\r\n        <div class=\"login-panel\">\r\n            <div style=\"width: 250px;padding: 10px;display: flex;justify-content: center;align-items: center;\">\r\n            </div>\r\n            <div class=\"right-login\">\r\n                <div>\r\n                    <h2>登录账户</h2>\r\n                </div>\r\n                <div class=\"text\">\r\n                    <input v-model=\"act\" class=\"act\" placeholder=\"请输入账号\" />\r\n                </div>\r\n                <div class=\"text\">\r\n                    <input v-model=\"pwd\" class=\"pwd\" type=\"password\" placeholder=\"请输入密码\" />\r\n                </div>\r\n                <div>\r\n                    <span class=\"login-btn\" @click=\"login\">立即登录</span>\r\n                </div>\r\n                <div class=\"tip\">\r\n                    <p>没有账号？<span class=\"no-act\" @click=\"toDoRegister\">点此注册</span></p>\r\n                </div>\r\n            </div>\r\n        </div>\r\n    </div>\r\n</template>\r\n\r\n<script>\r\nimport Vue from 'vue'\r\nconst DELAY_TIME = 1300;\r\nimport request from \"@/utils/request.js\";\r\nimport { setToken } from \"@/utils/storage.js\";\r\nimport md5 from 'js-md5';\r\nimport Logo from '@/components/Logo.vue';\r\nexport default {\r\n    name: \"Login\",\r\n    components: { Logo },\r\n    data() {\r\n        return {\r\n            act: '',\r\n            pwd: '',\r\n            colorLogo: 'rgb(82, 81, 81)',\r\n        }\r\n    },\r\n    methods: {\r\n        toDoRegister() {\r\n            this.$router.push('/register');\r\n        },\r\n        async login() {\r\n            if (!this.act || !this.pwd) {\r\n                Vue.prototype.$swal.fire({\r\n                    title: '填写校验',\r\n                    text: '账号或密码不能为空',\r\n                    icon: 'error',\r\n                    showConfirmButton: false,\r\n                    timer: DELAY_TIME,\r\n                });\r\n                return;\r\n            }\r\n            const hashedPwd = md5(md5(this.pwd));\r\n            const paramDTO = { userAccount: this.act, userPwd: hashedPwd };\r\n            try {\r\n                const { data } = await request.post(`user/login`, paramDTO);\r\n                if (data.code !== 200) {\r\n                    Vue.prototype.$swal.fire({\r\n                        title: '登录失败',\r\n                        text: data.msg,\r\n                        icon: 'error',\r\n                        showConfirmButton: false,\r\n                        timer: DELAY_TIME,\r\n                    });\r\n                    return;\r\n                }\r\n                setToken(data.data.token);\r\n                setTimeout(() => {\r\n                    const { role } = data.data;\r\n                    this.navigateToRole(role);\r\n                }, DELAY_TIME);\r\n            } catch (error) {\r\n                console.error('登录请求错误:', error);\r\n                Vue.prototype.$message.error('登录请求出错，请重试！');\r\n            }\r\n        },\r\n        navigateToRole(role) {\r\n            switch (role) {\r\n                case 1:\r\n                    this.$router.push('/admin');\r\n                    break;\r\n                case 2:\r\n                    this.$router.push('/user');\r\n                    break;\r\n                default:\r\n                    console.warn('未知的角色类型:', role);\r\n                    break;\r\n            }\r\n        },\r\n    }\r\n};\r\n</script>\r\n\r\n<style lang=\"scss\" scoped>\r\n* {\r\n    user-select: none;\r\n}\r\n\r\n.login-container {\r\n    width: 100%;\r\n    min-height: 100vh;\r\n    background-image: url('/bg.jpg'); // 使用背景图片，根据实际项目中图片存放路径调整此处\r\n    background-size: cover;\r\n    background-position: right;\r\n    background-repeat: no-repeat;\r\n    display: flex;\r\n    justify-content: center;\r\n    align-items: center;\r\n    flex-direction: column;\r\n}\r\n\r\n.login-panel {\r\n    position: fixed; /* 或者 relative, fixed, sticky 等 */\r\n    top: 50px; /* 根据需要调整 */\r\n    right: 50px;\r\n    padding: 15px;\r\n    justify-content: space-between;\r\n    height: auto;\r\n    border-radius: 5px;\r\n    background: linear-gradient(to right, rgb(255, 255, 255), rgba(165, 174, 171, 0.8));\r\n    margin-right: 45px; // 确保.login-panel位于背景的右侧\r\n}\r\n\r\n.right-login {\r\n    width: 250px;\r\n    background-color: white;\r\n    padding: 30px;\r\n    border-radius: 5px;\r\n}\r\n\r\n.logo {\r\n    margin: 10px 0 30px 0;\r\n}\r\n\r\n.act,\r\n.pwd {\r\n    margin: 8px 0;\r\n    height: 63px;\r\n    line-height: 63px;\r\n    width: 100%;\r\n    font-size: 20px;\r\n    font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;\r\n    font-weight: 800;\r\n    padding: 0 8px;\r\n    background-color: rgba(47, 195, 145, 0.15);\r\n    box-sizing: border-box;\r\n    border: 2px solid rgba(47, 195, 145, 0.3);\r\n    border-radius: 6px;\r\n    padding: 0 15px;\r\n    margin-top: 13px;\r\n}\r\n\r\n.act:focus,\r\n.pwd:focus {\r\n    outline: none;\r\n    transition: 1.2s;\r\n    background-color: rgba(47, 195, 145, 0.25);\r\n}\r\n\r\n.login-btn:hover {\r\n    background-color: rgba(47, 195, 145, 0.8);\r\n}\r\n\r\n.login-btn {\r\n    display: inline-block;\r\n    text-align: center;\r\n    border-radius: 3px;\r\n    margin-top: 20px;\r\n    height: 43px;\r\n    line-height: 43px;\r\n    width: 100%;\r\n    background-color: rgb(47, 195, 145);\r\n    font-size: 14px!important;\r\n    border: none;\r\n    color: white;\r\n    padding: 0!important;\r\n    cursor: pointer;\r\n    user-select: none;\r\n}\r\n\r\n.tip {\r\n    margin: 20px 0;\r\n\r\n    p {\r\n        padding: 3px 0;\r\n        margin: 0;\r\n        font-size: 14px;\r\n        color: rgb(100, 120, 100);\r\n        i {\r\n            margin-right: 3px;\r\n        }\r\n\r\n        span {\r\n            color: rgb(60, 80, 60);\r\n            border-radius: 2px;\r\n            margin: 0 6px;\r\n        }\r\n\r\n        .no-act:hover {\r\n            color: rgba(47, 195, 145, 0.8);\r\n            cursor: pointer;\r\n        }\r\n    }\r\n}\r\n</style>"]}]}