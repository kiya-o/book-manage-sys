{"remainingRequest":"D:\\Desktop\\图书馆系统项目开发\\图书管理系统\\源码\\前端\\book-manage-sys-view\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!D:\\Desktop\\图书馆系统项目开发\\图书管理系统\\源码\\前端\\book-manage-sys-view\\src\\views\\admin\\CreateNotice.vue?vue&type=script&lang=js&","dependencies":[{"path":"D:\\Desktop\\图书馆系统项目开发\\图书管理系统\\源码\\前端\\book-manage-sys-view\\src\\views\\admin\\CreateNotice.vue","mtime":1724313134000},{"path":"D:\\Desktop\\图书馆系统项目开发\\图书管理系统\\源码\\前端\\book-manage-sys-view\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\Desktop\\图书馆系统项目开发\\图书管理系统\\源码\\前端\\book-manage-sys-view\\node_modules\\babel-loader\\lib\\index.js","mtime":315532800000},{"path":"D:\\Desktop\\图书馆系统项目开发\\图书管理系统\\源码\\前端\\book-manage-sys-view\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\Desktop\\图书馆系统项目开发\\图书管理系统\\源码\\前端\\book-manage-sys-view\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KDQppbXBvcnQgRWRpdG9yIGZyb20gIkAvY29tcG9uZW50cy9FZGl0b3IiDQpleHBvcnQgZGVmYXVsdCB7DQogICAgY29tcG9uZW50czogeyBFZGl0b3IgfSwNCiAgICBkYXRhKCkgew0KICAgICAgICByZXR1cm4gew0KICAgICAgICAgICAgbm90aWNlOiB7fSwNCiAgICAgICAgICAgIHNhdmVBcGk6ICcvbm90aWNlL3NhdmUnLA0KICAgICAgICAgICAgdXBkYXRlQXBpOiAnL25vdGljZS91cGRhdGUnLA0KICAgICAgICAgICAgbm90aWNlT3BlcmF0aW9uOiAnJw0KICAgICAgICB9DQogICAgfSwNCiAgICBjcmVhdGVkKCkgew0KICAgICAgICB0aGlzLmxvYWRPcGVyYXRpb24oKTsNCiAgICB9LA0KICAgIG1ldGhvZHM6IHsNCiAgICAgICAgb3BlcmF0aW9uKCkgew0KICAgICAgICAgICAgaWYgKHRoaXMubm90aWNlT3BlcmF0aW9uID09PSAnc2F2ZScpIHsNCiAgICAgICAgICAgICAgICB0aGlzLnNhdmUoKTsNCiAgICAgICAgICAgICAgICByZXR1cm47DQogICAgICAgICAgICB9DQogICAgICAgICAgICB0aGlzLnVwZGF0ZSgpOw0KICAgICAgICB9LA0KICAgICAgICBsb2FkT3BlcmF0aW9uKCkgew0KICAgICAgICAgICAgY29uc3Qgb3BlcmF0aW9uID0gc2Vzc2lvblN0b3JhZ2UuZ2V0SXRlbSgnbm90aWNlT3BlcmF0aW9uJyk7DQogICAgICAgICAgICBjb25zb2xlLmxvZyhvcGVyYXRpb24pOw0KICAgICAgICAgICAgaWYgKG9wZXJhdGlvbiA9PT0gJ3VwZGF0ZScpIHsNCiAgICAgICAgICAgICAgICBjb25zdCBub3RpY2UgPSBzZXNzaW9uU3RvcmFnZS5nZXRJdGVtKCdub3RpY2VJbmZvJyk7DQogICAgICAgICAgICAgICAgdGhpcy5ub3RpY2UgPSBKU09OLnBhcnNlKG5vdGljZSk7DQogICAgICAgICAgICB9DQogICAgICAgICAgICB0aGlzLm5vdGljZU9wZXJhdGlvbiA9IHNlc3Npb25TdG9yYWdlLmdldEl0ZW0oJ25vdGljZU9wZXJhdGlvbicpOw0KICAgICAgICB9LA0KICAgICAgICByZWNlaXZlRGF0YShodG1sKSB7DQogICAgICAgICAgICB0aGlzLm5vdGljZS5jb250ZW50ID0gaHRtbDsNCiAgICAgICAgfSwNCiAgICAgICAgdXBkYXRlKCkgew0KICAgICAgICAgICAgdGhpcy4kYXhpb3MucHV0KHRoaXMudXBkYXRlQXBpLCB0aGlzLm5vdGljZSkudGhlbihyZXNwb25zZSA9PiB7DQogICAgICAgICAgICAgICAgaWYgKHJlc3BvbnNlLmRhdGEuY29kZSA9PT0gMjAwKSB7DQogICAgICAgICAgICAgICAgICAgIHRoaXMuJHN3YWwuZmlyZSh7DQogICAgICAgICAgICAgICAgICAgICAgICB0aXRsZTogJ+WFrOWRiuS/ruaUuScsDQogICAgICAgICAgICAgICAgICAgICAgICB0ZXh0OiAn5L+u5pS55oiQ5YqfJywNCiAgICAgICAgICAgICAgICAgICAgICAgIGljb246ICdzdWNjZXNzJywNCiAgICAgICAgICAgICAgICAgICAgICAgIHNob3dDb25maXJtQnV0dG9uOiBmYWxzZSwNCiAgICAgICAgICAgICAgICAgICAgICAgIHRpbWVyOiAxMDAwLA0KICAgICAgICAgICAgICAgICAgICB9KTsNCiAgICAgICAgICAgICAgICAgICAgLy8g6L+U5Zue5LiK5LiA57qnDQogICAgICAgICAgICAgICAgICAgIHRoaXMuJHJvdXRlci5nbygtMSk7DQogICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgfSk7DQogICAgICAgIH0sDQogICAgICAgIHNhdmUoKSB7DQogICAgICAgICAgICB0aGlzLiRheGlvcy5wb3N0KHRoaXMuc2F2ZUFwaSwgdGhpcy5ub3RpY2UpLnRoZW4ocmVzcG9uc2UgPT4gew0KICAgICAgICAgICAgICAgIGlmIChyZXNwb25zZS5kYXRhLmNvZGUgPT09IDIwMCkgew0KICAgICAgICAgICAgICAgICAgICB0aGlzLiRzd2FsLmZpcmUoew0KICAgICAgICAgICAgICAgICAgICAgICAgdGl0bGU6ICflhazlkYrmlrDlop4nLA0KICAgICAgICAgICAgICAgICAgICAgICAgdGV4dDogJ+aWsOWinuaIkOWKnycsDQogICAgICAgICAgICAgICAgICAgICAgICBpY29uOiAnc3VjY2VzcycsDQogICAgICAgICAgICAgICAgICAgICAgICBzaG93Q29uZmlybUJ1dHRvbjogZmFsc2UsDQogICAgICAgICAgICAgICAgICAgICAgICB0aW1lcjogMTAwMCwNCiAgICAgICAgICAgICAgICAgICAgfSk7DQogICAgICAgICAgICAgICAgICAgIC8vIOi/lOWbnuS4iuS4gOe6pw0KICAgICAgICAgICAgICAgICAgICB0aGlzLiRyb3V0ZXIuZ28oLTEpOw0KICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgIH0pOw0KICAgICAgICB9LA0KICAgIH0NCn0NCg0K"},{"version":3,"sources":["CreateNotice.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;AAsBA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"CreateNotice.vue","sourceRoot":"src/views/admin","sourcesContent":["<template>\r\n    <div style=\"background-color: rgb(248, 249, 250);\">\r\n        <div style=\"width: 800px;margin: 0 auto;padding: 30px 0;box-sizing: border-box;min-height: 100vh;\">\r\n            <p style=\"font-size: 22px;padding: 20px 0;\">{{ noticeOperation === 'save' ? '公告新增' : '公告修改' }}</p>\r\n            <div>\r\n                <div style=\"margin: 20px 0;\">\r\n                    <input type=\"text\" placeholder=\"标题\" v-model=\"notice.name\">\r\n                </div>\r\n                <div>\r\n                    <Editor height=\"calc(100vh - 500px)\" :receiveContent=\"notice.content\" @on-receive=\"receiveData\" />\r\n                </div>\r\n            </div>\r\n            <div style=\"margin: 20px 0;text-align: center;\">\r\n                <span class=\"operation-btn\" @click=\"operation\">\r\n                    {{ noticeOperation === 'save' ? '立即新增' : '立即修改' }}\r\n                    <i class=\"el-icon-right\"></i>\r\n                </span>\r\n            </div>\r\n        </div>\r\n    </div>\r\n</template>\r\n<script>\r\nimport Editor from \"@/components/Editor\"\r\nexport default {\r\n    components: { Editor },\r\n    data() {\r\n        return {\r\n            notice: {},\r\n            saveApi: '/notice/save',\r\n            updateApi: '/notice/update',\r\n            noticeOperation: ''\r\n        }\r\n    },\r\n    created() {\r\n        this.loadOperation();\r\n    },\r\n    methods: {\r\n        operation() {\r\n            if (this.noticeOperation === 'save') {\r\n                this.save();\r\n                return;\r\n            }\r\n            this.update();\r\n        },\r\n        loadOperation() {\r\n            const operation = sessionStorage.getItem('noticeOperation');\r\n            console.log(operation);\r\n            if (operation === 'update') {\r\n                const notice = sessionStorage.getItem('noticeInfo');\r\n                this.notice = JSON.parse(notice);\r\n            }\r\n            this.noticeOperation = sessionStorage.getItem('noticeOperation');\r\n        },\r\n        receiveData(html) {\r\n            this.notice.content = html;\r\n        },\r\n        update() {\r\n            this.$axios.put(this.updateApi, this.notice).then(response => {\r\n                if (response.data.code === 200) {\r\n                    this.$swal.fire({\r\n                        title: '公告修改',\r\n                        text: '修改成功',\r\n                        icon: 'success',\r\n                        showConfirmButton: false,\r\n                        timer: 1000,\r\n                    });\r\n                    // 返回上一级\r\n                    this.$router.go(-1);\r\n                }\r\n            });\r\n        },\r\n        save() {\r\n            this.$axios.post(this.saveApi, this.notice).then(response => {\r\n                if (response.data.code === 200) {\r\n                    this.$swal.fire({\r\n                        title: '公告新增',\r\n                        text: '新增成功',\r\n                        icon: 'success',\r\n                        showConfirmButton: false,\r\n                        timer: 1000,\r\n                    });\r\n                    // 返回上一级\r\n                    this.$router.go(-1);\r\n                }\r\n            });\r\n        },\r\n    }\r\n}\r\n\r\n</script>\r\n<style lang=\"scss\" scoped>\r\ninput {\r\n    outline: none;\r\n    border: none;\r\n    width: 100%;\r\n    padding: 18px 12px;\r\n    font-size: 24px;\r\n    box-sizing: border-box;\r\n    border-radius: 5px;\r\n    font-weight: bold;\r\n}\r\n\r\n.operation-btn {\r\n    padding: 14px 40px;\r\n    background-color: rgb(235, 237, 245);\r\n    color: rgb(43, 121, 203);\r\n    border: none;\r\n    font-size: 12px;\r\n    border-radius: 5px;\r\n    cursor: pointer;\r\n}\r\n</style>"]}]}