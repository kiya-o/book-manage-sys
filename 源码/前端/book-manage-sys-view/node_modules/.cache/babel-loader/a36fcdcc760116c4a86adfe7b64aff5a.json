{"remainingRequest":"D:\\Desktop\\图书馆系统项目开发\\图书管理系统\\源码\\前端\\book-manage-sys-view\\node_modules\\babel-loader\\lib\\index.js!D:\\Desktop\\图书馆系统项目开发\\图书管理系统\\源码\\前端\\book-manage-sys-view\\node_modules\\cache-loader\\dist\\cjs.js??ref--0-0!D:\\Desktop\\图书馆系统项目开发\\图书管理系统\\源码\\前端\\book-manage-sys-view\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!D:\\Desktop\\图书馆系统项目开发\\图书管理系统\\源码\\前端\\book-manage-sys-view\\src\\views\\admin\\CreateNotice.vue?vue&type=script&lang=js&","dependencies":[{"path":"D:\\Desktop\\图书馆系统项目开发\\图书管理系统\\源码\\前端\\book-manage-sys-view\\src\\views\\admin\\CreateNotice.vue","mtime":1724313134000},{"path":"D:\\Desktop\\图书馆系统项目开发\\图书管理系统\\源码\\前端\\book-manage-sys-view\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\Desktop\\图书馆系统项目开发\\图书管理系统\\源码\\前端\\book-manage-sys-view\\node_modules\\babel-loader\\lib\\index.js","mtime":315532800000},{"path":"D:\\Desktop\\图书馆系统项目开发\\图书管理系统\\源码\\前端\\book-manage-sys-view\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\Desktop\\图书馆系统项目开发\\图书管理系统\\源码\\前端\\book-manage-sys-view\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KaW1wb3J0IEVkaXRvciBmcm9tICJAL2NvbXBvbmVudHMvRWRpdG9yIjsKZXhwb3J0IGRlZmF1bHQgewogIGNvbXBvbmVudHM6IHsKICAgIEVkaXRvcgogIH0sCgogIGRhdGEoKSB7CiAgICByZXR1cm4gewogICAgICBub3RpY2U6IHt9LAogICAgICBzYXZlQXBpOiAnL25vdGljZS9zYXZlJywKICAgICAgdXBkYXRlQXBpOiAnL25vdGljZS91cGRhdGUnLAogICAgICBub3RpY2VPcGVyYXRpb246ICcnCiAgICB9OwogIH0sCgogIGNyZWF0ZWQoKSB7CiAgICB0aGlzLmxvYWRPcGVyYXRpb24oKTsKICB9LAoKICBtZXRob2RzOiB7CiAgICBvcGVyYXRpb24oKSB7CiAgICAgIGlmICh0aGlzLm5vdGljZU9wZXJhdGlvbiA9PT0gJ3NhdmUnKSB7CiAgICAgICAgdGhpcy5zYXZlKCk7CiAgICAgICAgcmV0dXJuOwogICAgICB9CgogICAgICB0aGlzLnVwZGF0ZSgpOwogICAgfSwKCiAgICBsb2FkT3BlcmF0aW9uKCkgewogICAgICBjb25zdCBvcGVyYXRpb24gPSBzZXNzaW9uU3RvcmFnZS5nZXRJdGVtKCdub3RpY2VPcGVyYXRpb24nKTsKICAgICAgY29uc29sZS5sb2cob3BlcmF0aW9uKTsKCiAgICAgIGlmIChvcGVyYXRpb24gPT09ICd1cGRhdGUnKSB7CiAgICAgICAgY29uc3Qgbm90aWNlID0gc2Vzc2lvblN0b3JhZ2UuZ2V0SXRlbSgnbm90aWNlSW5mbycpOwogICAgICAgIHRoaXMubm90aWNlID0gSlNPTi5wYXJzZShub3RpY2UpOwogICAgICB9CgogICAgICB0aGlzLm5vdGljZU9wZXJhdGlvbiA9IHNlc3Npb25TdG9yYWdlLmdldEl0ZW0oJ25vdGljZU9wZXJhdGlvbicpOwogICAgfSwKCiAgICByZWNlaXZlRGF0YShodG1sKSB7CiAgICAgIHRoaXMubm90aWNlLmNvbnRlbnQgPSBodG1sOwogICAgfSwKCiAgICB1cGRhdGUoKSB7CiAgICAgIHRoaXMuJGF4aW9zLnB1dCh0aGlzLnVwZGF0ZUFwaSwgdGhpcy5ub3RpY2UpLnRoZW4ocmVzcG9uc2UgPT4gewogICAgICAgIGlmIChyZXNwb25zZS5kYXRhLmNvZGUgPT09IDIwMCkgewogICAgICAgICAgdGhpcy4kc3dhbC5maXJlKHsKICAgICAgICAgICAgdGl0bGU6ICflhazlkYrkv67mlLknLAogICAgICAgICAgICB0ZXh0OiAn5L+u5pS55oiQ5YqfJywKICAgICAgICAgICAgaWNvbjogJ3N1Y2Nlc3MnLAogICAgICAgICAgICBzaG93Q29uZmlybUJ1dHRvbjogZmFsc2UsCiAgICAgICAgICAgIHRpbWVyOiAxMDAwCiAgICAgICAgICB9KTsgLy8g6L+U5Zue5LiK5LiA57qnCgogICAgICAgICAgdGhpcy4kcm91dGVyLmdvKC0xKTsKICAgICAgICB9CiAgICAgIH0pOwogICAgfSwKCiAgICBzYXZlKCkgewogICAgICB0aGlzLiRheGlvcy5wb3N0KHRoaXMuc2F2ZUFwaSwgdGhpcy5ub3RpY2UpLnRoZW4ocmVzcG9uc2UgPT4gewogICAgICAgIGlmIChyZXNwb25zZS5kYXRhLmNvZGUgPT09IDIwMCkgewogICAgICAgICAgdGhpcy4kc3dhbC5maXJlKHsKICAgICAgICAgICAgdGl0bGU6ICflhazlkYrmlrDlop4nLAogICAgICAgICAgICB0ZXh0OiAn5paw5aKe5oiQ5YqfJywKICAgICAgICAgICAgaWNvbjogJ3N1Y2Nlc3MnLAogICAgICAgICAgICBzaG93Q29uZmlybUJ1dHRvbjogZmFsc2UsCiAgICAgICAgICAgIHRpbWVyOiAxMDAwCiAgICAgICAgICB9KTsgLy8g6L+U5Zue5LiK5LiA57qnCgogICAgICAgICAgdGhpcy4kcm91dGVyLmdvKC0xKTsKICAgICAgICB9CiAgICAgIH0pOwogICAgfQoKICB9Cn07"},{"version":3,"sources":["CreateNotice.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;AAsBA,OAAA,MAAA,MAAA,qBAAA;AACA,eAAA;AACA,EAAA,UAAA,EAAA;AAAA,IAAA;AAAA,GADA;;AAEA,EAAA,IAAA,GAAA;AACA,WAAA;AACA,MAAA,MAAA,EAAA,EADA;AAEA,MAAA,OAAA,EAAA,cAFA;AAGA,MAAA,SAAA,EAAA,gBAHA;AAIA,MAAA,eAAA,EAAA;AAJA,KAAA;AAMA,GATA;;AAUA,EAAA,OAAA,GAAA;AACA,SAAA,aAAA;AACA,GAZA;;AAaA,EAAA,OAAA,EAAA;AACA,IAAA,SAAA,GAAA;AACA,UAAA,KAAA,eAAA,KAAA,MAAA,EAAA;AACA,aAAA,IAAA;AACA;AACA;;AACA,WAAA,MAAA;AACA,KAPA;;AAQA,IAAA,aAAA,GAAA;AACA,YAAA,SAAA,GAAA,cAAA,CAAA,OAAA,CAAA,iBAAA,CAAA;AACA,MAAA,OAAA,CAAA,GAAA,CAAA,SAAA;;AACA,UAAA,SAAA,KAAA,QAAA,EAAA;AACA,cAAA,MAAA,GAAA,cAAA,CAAA,OAAA,CAAA,YAAA,CAAA;AACA,aAAA,MAAA,GAAA,IAAA,CAAA,KAAA,CAAA,MAAA,CAAA;AACA;;AACA,WAAA,eAAA,GAAA,cAAA,CAAA,OAAA,CAAA,iBAAA,CAAA;AACA,KAhBA;;AAiBA,IAAA,WAAA,CAAA,IAAA,EAAA;AACA,WAAA,MAAA,CAAA,OAAA,GAAA,IAAA;AACA,KAnBA;;AAoBA,IAAA,MAAA,GAAA;AACA,WAAA,MAAA,CAAA,GAAA,CAAA,KAAA,SAAA,EAAA,KAAA,MAAA,EAAA,IAAA,CAAA,QAAA,IAAA;AACA,YAAA,QAAA,CAAA,IAAA,CAAA,IAAA,KAAA,GAAA,EAAA;AACA,eAAA,KAAA,CAAA,IAAA,CAAA;AACA,YAAA,KAAA,EAAA,MADA;AAEA,YAAA,IAAA,EAAA,MAFA;AAGA,YAAA,IAAA,EAAA,SAHA;AAIA,YAAA,iBAAA,EAAA,KAJA;AAKA,YAAA,KAAA,EAAA;AALA,WAAA,EADA,CAQA;;AACA,eAAA,OAAA,CAAA,EAAA,CAAA,CAAA,CAAA;AACA;AACA,OAZA;AAaA,KAlCA;;AAmCA,IAAA,IAAA,GAAA;AACA,WAAA,MAAA,CAAA,IAAA,CAAA,KAAA,OAAA,EAAA,KAAA,MAAA,EAAA,IAAA,CAAA,QAAA,IAAA;AACA,YAAA,QAAA,CAAA,IAAA,CAAA,IAAA,KAAA,GAAA,EAAA;AACA,eAAA,KAAA,CAAA,IAAA,CAAA;AACA,YAAA,KAAA,EAAA,MADA;AAEA,YAAA,IAAA,EAAA,MAFA;AAGA,YAAA,IAAA,EAAA,SAHA;AAIA,YAAA,iBAAA,EAAA,KAJA;AAKA,YAAA,KAAA,EAAA;AALA,WAAA,EADA,CAQA;;AACA,eAAA,OAAA,CAAA,EAAA,CAAA,CAAA,CAAA;AACA;AACA,OAZA;AAaA;;AAjDA;AAbA,CAAA","sourcesContent":["<template>\r\n    <div style=\"background-color: rgb(248, 249, 250);\">\r\n        <div style=\"width: 800px;margin: 0 auto;padding: 30px 0;box-sizing: border-box;min-height: 100vh;\">\r\n            <p style=\"font-size: 22px;padding: 20px 0;\">{{ noticeOperation === 'save' ? '公告新增' : '公告修改' }}</p>\r\n            <div>\r\n                <div style=\"margin: 20px 0;\">\r\n                    <input type=\"text\" placeholder=\"标题\" v-model=\"notice.name\">\r\n                </div>\r\n                <div>\r\n                    <Editor height=\"calc(100vh - 500px)\" :receiveContent=\"notice.content\" @on-receive=\"receiveData\" />\r\n                </div>\r\n            </div>\r\n            <div style=\"margin: 20px 0;text-align: center;\">\r\n                <span class=\"operation-btn\" @click=\"operation\">\r\n                    {{ noticeOperation === 'save' ? '立即新增' : '立即修改' }}\r\n                    <i class=\"el-icon-right\"></i>\r\n                </span>\r\n            </div>\r\n        </div>\r\n    </div>\r\n</template>\r\n<script>\r\nimport Editor from \"@/components/Editor\"\r\nexport default {\r\n    components: { Editor },\r\n    data() {\r\n        return {\r\n            notice: {},\r\n            saveApi: '/notice/save',\r\n            updateApi: '/notice/update',\r\n            noticeOperation: ''\r\n        }\r\n    },\r\n    created() {\r\n        this.loadOperation();\r\n    },\r\n    methods: {\r\n        operation() {\r\n            if (this.noticeOperation === 'save') {\r\n                this.save();\r\n                return;\r\n            }\r\n            this.update();\r\n        },\r\n        loadOperation() {\r\n            const operation = sessionStorage.getItem('noticeOperation');\r\n            console.log(operation);\r\n            if (operation === 'update') {\r\n                const notice = sessionStorage.getItem('noticeInfo');\r\n                this.notice = JSON.parse(notice);\r\n            }\r\n            this.noticeOperation = sessionStorage.getItem('noticeOperation');\r\n        },\r\n        receiveData(html) {\r\n            this.notice.content = html;\r\n        },\r\n        update() {\r\n            this.$axios.put(this.updateApi, this.notice).then(response => {\r\n                if (response.data.code === 200) {\r\n                    this.$swal.fire({\r\n                        title: '公告修改',\r\n                        text: '修改成功',\r\n                        icon: 'success',\r\n                        showConfirmButton: false,\r\n                        timer: 1000,\r\n                    });\r\n                    // 返回上一级\r\n                    this.$router.go(-1);\r\n                }\r\n            });\r\n        },\r\n        save() {\r\n            this.$axios.post(this.saveApi, this.notice).then(response => {\r\n                if (response.data.code === 200) {\r\n                    this.$swal.fire({\r\n                        title: '公告新增',\r\n                        text: '新增成功',\r\n                        icon: 'success',\r\n                        showConfirmButton: false,\r\n                        timer: 1000,\r\n                    });\r\n                    // 返回上一级\r\n                    this.$router.go(-1);\r\n                }\r\n            });\r\n        },\r\n    }\r\n}\r\n\r\n</script>\r\n<style lang=\"scss\" scoped>\r\ninput {\r\n    outline: none;\r\n    border: none;\r\n    width: 100%;\r\n    padding: 18px 12px;\r\n    font-size: 24px;\r\n    box-sizing: border-box;\r\n    border-radius: 5px;\r\n    font-weight: bold;\r\n}\r\n\r\n.operation-btn {\r\n    padding: 14px 40px;\r\n    background-color: rgb(235, 237, 245);\r\n    color: rgb(43, 121, 203);\r\n    border: none;\r\n    font-size: 12px;\r\n    border-radius: 5px;\r\n    cursor: pointer;\r\n}\r\n</style>"],"sourceRoot":"src/views/admin"}]}